{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { MessageBox } from \"element-ui\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      instructionsText: '信息采集中...',\n      dialogVisible: false,\n      // 控制对话框显示的变量\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入工作人员姓名',\n          trigger: 'blur'\n        }],\n        gender: [{\n          required: true,\n          message: '请选择性别',\n          trigger: 'change'\n        }],\n        phone: [{\n          required: true,\n          message: '请输入电话号码',\n          trigger: 'blur'\n        }, {\n          min: 11,\n          max: 11,\n          message: '电话号码必须是11位长度',\n          trigger: 'blur'\n        }, {\n          pattern: /^\\d{11}$/,\n          message: '电话号码必须是11位数字',\n          trigger: 'blur'\n        }],\n        hire_date: [{\n          required: true,\n          message: '请选择入职日期',\n          trigger: 'change'\n        }]\n      },\n      listForm: {\n        page: 1,\n        size: 4,\n        total: 0,\n        pagerCount: 5\n      },\n      workerList: [],\n      addWorkerVisible: false,\n      addWorkerTitle: '添加工作人员',\n      workerMesVisible: false,\n      workerMesVisible1: false,\n      workerMesTitle: '查看信息',\n      form: {\n        dialogImageUrl: \"\",\n        dialogVisible: false,\n        fileParam: \"\",\n        id: null,\n        username: \"\",\n        gender: \"\",\n        phone: \"\",\n        id_card: \"\",\n        birthday: \"\",\n        hire_date: \"\",\n        resign_date: \"\",\n        imgset_dir: \"\",\n        CREATED: \"\",\n        UPDATED: \"\",\n        remove: \"\",\n        updated: \"\",\n        created: \"\",\n        createby: \"\",\n        updateby: \"\",\n        isactive: \"\",\n        client_ID: \"\",\n        org_ID: \" \",\n        avatarPath: \"\",\n        position: \"\"\n      },\n      addForm: {\n        username: \"\",\n        gender: \"\",\n        phone: \"\",\n        position: \"\",\n        birthday: \"\"\n      }\n    };\n  },\n  mounted() {\n    this.getWorkerList();\n  },\n  methods: {\n    add() {\n      this.addWorkerVisible = true;\n    },\n    captureFace(row) {\n      this.dialogVisible = true;\n      this.instructionsText = '信息采集中...';\n      // 在4秒后改变文本\n      setTimeout(() => {\n        this.instructionsText = '请正对摄像头';\n      }, 4000);\n\n      // 请求访问用户的摄像头\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(stream => {\n        const videoElement = document.getElementById('videoElement');\n        videoElement.srcObject = stream;\n        const chunks = [];\n        const recorder = new MediaRecorder(stream);\n        recorder.ondataavailable = event => {\n          chunks.push(event.data);\n        };\n        recorder.start(5000);\n        setTimeout(() => {\n          recorder.stop();\n          stream.getVideoTracks()[0].stop();\n        }, 5000);\n        recorder.onstop = () => {\n          const formData = new FormData();\n          formData.append('file', new Blob(chunks, {\n            type: 'video/mp4'\n          }), 'video.mp4');\n          formData.append('username', row.username);\n          formData.append('id', row.id);\n          formData.append('label', 1);\n          this.instructionsText = '上传人脸信息...';\n          axios.post('http://fan.v1.idcfengye.com/upload_video', formData).then(response => {\n            console.log('Video upload successful:', response.data);\n          }).catch(error => {\n            alert(\"上传失败，未检测到有效人脸\");\n            console.error('Error uploading video:', error);\n          }).finally(() => {\n            this.dialogVisible = false;\n            this.getWorkerList();\n          });\n        };\n      }).catch(error => {\n        console.error('Error accessing camera:', error);\n        this.dialogVisible = false;\n      });\n    },\n    handleClose(done) {\n      done();\n    },\n    getWorkerList() {\n      axios.get(\"http://xiao.free.idcfengye.com/api/employee/all\").then(res => {\n        this.workerList = res.data.data;\n        this.listForm.total = res.data.data.length;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    queryWorker(item) {\n      this.workerMesTitle = '查看信息';\n      axios.get(`http://xiao.free.idcfengye.com/api/employee/search`, {\n        params: {\n          id: item.id\n        }\n      }).then(res => {\n        this.form = res.data.data[0];\n        this.workerMesVisible = true;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    confirmDelete(item) {\n      MessageBox.confirm('确定要删除该员工信息吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.delWorker(item);\n      }).catch(() => {});\n    },\n    delWorker(item) {\n      const id = parseInt(item.id, 10); // 确保 id 是整数格式\n\n      axios.delete('http://xiao.free.idcfengye.com/api/employee/delete', {\n        data: {\n          id: id\n        }\n      }).then(res => {\n        this.$message.success('删除成功');\n        this.getWorkerList();\n      }).catch(error => {\n        console.error(error);\n        this.$message.error('删除失败');\n      });\n    },\n    formatDate(date) {\n      const d = new Date(date);\n      const month = `${d.getMonth() + 1}`.padStart(2, '0');\n      const day = `${d.getDate()}`.padStart(2, '0');\n      const year = d.getFullYear();\n      return [year, month, day].join('-');\n    },\n    updateWorker(item) {\n      this.workerMesTitle = '修改信息';\n      axios.get(`http://xiao.free.idcfengye.com/api/employee/search`, {\n        params: {\n          id: item.id\n        }\n      }).then(res => {\n        this.form = res.data.data[0];\n        this.workerMesVisible1 = true;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    submitUpdateForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.updateWorkerInfo();\n        } else {\n          console.log('表单验证失败!');\n          return false;\n        }\n      });\n    },\n    updateWorkerInfo() {\n      const requestBody = {\n        id: this.form.id,\n        gender: this.form.gender,\n        phone: this.form.phone,\n        hire_date: this.formatDate(this.form.hire_date),\n        description: this.form.description\n      };\n      axios.put('http://xiao.free.idcfengye.com/api/employee/update', requestBody, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        if (res.data.code === 0) {\n          this.$message.success('信息修改成功');\n          this.getWorkerList();\n        } else {\n          this.$message.error('信息修改失败：' + res.data.message);\n        }\n      }).catch(error => {\n        console.error(error);\n        this.$message.error('信息修改失败');\n      });\n      this.workerMesVisible1 = false;\n    },\n    adda() {\n      this.addWorkerTitle = '新增工作人员信息';\n      this.addWorkerVisible = true;\n      this.addForm = {\n        username: \"\",\n        gender: \"\",\n        phone: \"\",\n        position: \"\",\n        birthday: \"\"\n      };\n    },\n    addWorker() {\n      const requestBody = {\n        username: this.addForm.username,\n        gender: this.addForm.gender,\n        position: this.addForm.position,\n        phone: this.addForm.phone,\n        id_card: '123456112345623456',\n        avatarPath: \"hanerbao-2023-JULY-8-16-42-23.jpg\"\n      };\n      axios.post(\"http://xiao.free.idcfengye.com/api/employee/add\", requestBody).then(res => {\n        this.getWorkerList();\n      }).catch(error => {\n        console.log(error);\n      });\n      this.addWorkerVisible = false;\n    },\n    handleSizeChange(value) {\n      this.listForm.size = value;\n      this.listForm.page = 1; // 重置当前页为第一页\n      this.getWorkerList();\n    },\n    handlePageChange(value) {\n      this.listForm.page = value;\n      this.getWorkerList();\n    }\n  }\n};","map":{"version":3,"names":["MessageBox","axios","data","instructionsText","dialogVisible","rules","username","required","message","trigger","gender","phone","min","max","pattern","hire_date","listForm","page","size","total","pagerCount","workerList","addWorkerVisible","addWorkerTitle","workerMesVisible","workerMesVisible1","workerMesTitle","form","dialogImageUrl","fileParam","id","id_card","birthday","resign_date","imgset_dir","CREATED","UPDATED","remove","updated","created","createby","updateby","isactive","client_ID","org_ID","avatarPath","position","addForm","mounted","getWorkerList","methods","add","captureFace","row","setTimeout","navigator","mediaDevices","getUserMedia","video","then","stream","videoElement","document","getElementById","srcObject","chunks","recorder","MediaRecorder","ondataavailable","event","push","start","stop","getVideoTracks","onstop","formData","FormData","append","Blob","type","post","response","console","log","catch","error","alert","finally","handleClose","done","get","res","length","queryWorker","item","params","confirmDelete","confirm","confirmButtonText","cancelButtonText","delWorker","parseInt","delete","$message","success","formatDate","date","d","Date","month","getMonth","padStart","day","getDate","year","getFullYear","join","updateWorker","submitUpdateForm","formName","$refs","validate","valid","updateWorkerInfo","requestBody","description","put","headers","code","adda","addWorker","handleSizeChange","value","handlePageChange"],"sources":["src/views/page/work/workers.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n    <el-table :data=\"workerList.slice((listForm.page - 1) * listForm.size, listForm.page * listForm.size)\" border style=\"width: 100%\">\r\n\r\n      <el-table-column\r\n          prop=\"username\"\r\n          label=\"姓名\"\r\n          width=\"130\"\r\n          align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column label=\"照片\" width=\"120\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <div @click=\"scope.row.isCollected ? null : captureFace(scope.row)\" style=\"cursor: pointer; text-align: center;\">\r\n            <img\r\n                :src=\"scope.row.imgset_dir\"\r\n                alt=\"照片\"\r\n                style=\"width: 100px; height: 100px;\"\r\n                :class=\"{'disabled-image': scope.row.isCollected}\">\r\n            <span v-if=\"!scope.row.isCollected\" style=\"display: block; color: blue;\">点击上传</span>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"gender\"\r\n          label=\"性别\"\r\n          width=\"130\"\r\n          align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <template v-if=\"scope.row.gender === '0'\">女</template>\r\n          <template v-if=\"scope.row.gender === '1'\">男</template>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"phone\"\r\n          label=\"电话\"\r\n          width=\"130\"\r\n          align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"hire_date\"\r\n          label=\"入职日期\"\r\n          width=\"270\"\r\n          align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          float=\"right\"\r\n          label=\"操作\"\r\n          width=\"280\"\r\n          align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button  type=\"text\" size=\"small\" @click.native.prevent=\"queryWorker(scope.row)\">查看</el-button>\r\n          <el-button  type=\"text\" size=\"small\" @click.native.prevent=\"updateWorker(scope.row)\">修改</el-button>\r\n          <el-button type=\"text\" size=\"small\" :disabled=\"scope.row.isCollected\" @click=\"captureFace(scope.row)\">人脸采集</el-button>\r\n          <el-button type=\"text\" size=\"small\" @click.native.prevent=\"confirmDelete(scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handlePageChange\"\r\n        :page-sizes=\"[4, 10, 20, 50, 100, 500, 1000]\"\r\n        :current-page=\"listForm.page\"\r\n        :page-size=\"listForm.size\"\r\n        :pagerCount=\"listForm.pagerCount\"\r\n        :total=\"listForm.total\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        style=\" margin: auto\">\r\n    </el-pagination>\r\n    <el-button class=\"add-button\" type=\"primary\" icon=\"el-icon-plus\" @click=\"add()\">添加</el-button>\r\n\r\n    <!--  详细信息  -->\r\n    <el-dialog title=\"工作人员信息详情\" :visible.sync=\"workerMesVisible\" width=\"900px\">\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"140px\">\r\n        <el-form-item label=\"工号\">\r\n          <el-input v-model=\"form.id\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\">\r\n          <el-input v-model=\"form.username\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\">\r\n          <el-input :value=\"form.gender === '0' ? '女' : '男'\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"电话\" prop=\"phone\">\r\n          <el-input v-model=\"form.phone\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"入职日期\" prop=\"phone\">\r\n          <el-input v-model=\"form.hire_date\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\" prop=\"phone\">\r\n          <el-input v-model=\"form.description\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <!--  修改信息  -->\r\n    <el-dialog title=\"修改工作人员信息\" :visible.sync=\"workerMesVisible1\" width=\"900px\">\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"140px\">\r\n        <el-form-item label=\"工号\">\r\n          <el-input v-model=\"form.id\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\">\r\n          <el-input v-model=\"form.username\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\">\r\n          <el-input :value=\"form.gender === '0' ? '女' : '男'\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"电话\" prop=\"phone\" :rules=\"rules.phone\">\r\n          <el-input v-model=\"form.phone\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"入职日期\" prop=\"hire_date\">\r\n          <el-input v-model=\"form.hire_date\" :disabled=\"true\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\" prop=\"description\">\r\n          <el-input v-model=\"form.description\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item style=\"width:100%;\">\r\n          <el-button type=\"primary\" @click=\"submitUpdateForm('form')\" style=\"width:50%;margin-left:80px;margin-top:10px;border-color:#f3aecd;background-color: #f3aecd\">确认修改</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n\r\n    <!--  添加信息  -->\r\n    <el-dialog title=\"添加工作人员\" :visible.sync=\"addWorkerVisible\" width=\"900px\">\r\n      <el-form ref=\"addForm\" :model=\"addForm\" :rules=\"rules\" label-width=\"140px\">\r\n        <el-form-item label=\"工作人员姓名\" prop=\"username\">\r\n          <el-input v-model=\"addForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" prop=\"gender\">\r\n          <el-select v-model=\"addForm.gender\" placeholder=\"请选择您的性别\">\r\n            <el-option label=\"男\" value=\"1\"></el-option>\r\n            <el-option label=\"女\" value=\"0\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"电话\" prop=\"phone\">\r\n          <el-input v-model=\"addForm.phone\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"入职日期\" prop=\"hire_date\">\r\n          <el-date-picker type=\"date\" placeholder=\"选择日期\" format=\"yyyy-MM-dd\" value-format=\"yyyy-MM-dd\" v-model=\"addForm.hire_date\" style=\"width: 100%;\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\" prop=\"description\">\r\n          <el-input v-model=\"addForm.description\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item style=\"width:100%;\">\r\n          <el-button type=\"primary\" @click=\"submitAddForm('addForm')\" style=\"width:50%;margin-left:80px;margin-top:10px;border-color: #f3aecd;background-color: #f3aecd\">添加工作人员</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n\r\n    <el-dialog :visible.sync=\"dialogVisible\" width=\"36%\" height=\"36%\" :modal=\"false\" :show-close=\"false\" :before-close=\"handleClose\">\r\n      <div class=\"face-recognition-container\">\r\n        <video id=\"videoElement\" autoplay style=\"width: 100%;\"></video>\r\n        <div class=\"overlay\">\r\n          <p class=\"instructions\">{{ instructionsText }}</p>\r\n          <div class=\"scan-animation\"></div>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { MessageBox } from \"element-ui\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      instructionsText: '信息采集中...',\r\n      dialogVisible: false, // 控制对话框显示的变量\r\n      rules: {\r\n        username: [\r\n          { required: true, message: '请输入工作人员姓名', trigger: 'blur' }\r\n        ],\r\n        gender: [\r\n          { required: true, message: '请选择性别', trigger: 'change' }\r\n        ],\r\n        phone: [\r\n          { required: true, message: '请输入电话号码', trigger: 'blur' },\r\n          { min: 11, max: 11, message: '电话号码必须是11位长度', trigger: 'blur' },\r\n          { pattern: /^\\d{11}$/, message: '电话号码必须是11位数字', trigger: 'blur' }\r\n        ],\r\n        hire_date: [\r\n          { required: true, message: '请选择入职日期', trigger: 'change' }\r\n        ]\r\n      },\r\n      listForm: {\r\n        page: 1,\r\n        size: 4,\r\n        total: 0,\r\n        pagerCount: 5,\r\n      },\r\n      workerList: [],\r\n      addWorkerVisible: false,\r\n      addWorkerTitle: '添加工作人员',\r\n      workerMesVisible: false,\r\n      workerMesVisible1: false,\r\n\r\n      workerMesTitle: '查看信息',\r\n      form: {\r\n        dialogImageUrl: \"\",\r\n        dialogVisible: false,\r\n        fileParam: \"\",\r\n        id: null,\r\n        username: \"\",\r\n        gender: \"\",\r\n        phone: \"\",\r\n        id_card: \"\",\r\n        birthday: \"\",\r\n        hire_date: \"\",\r\n        resign_date: \"\",\r\n        imgset_dir: \"\",\r\n        CREATED: \"\",\r\n        UPDATED: \"\",\r\n        remove: \"\",\r\n        updated: \"\",\r\n        created: \"\",\r\n        createby: \"\",\r\n        updateby: \"\",\r\n        isactive: \"\",\r\n        client_ID: \"\",\r\n        org_ID: \" \",\r\n        avatarPath: \"\",\r\n        position: \"\"\r\n      },\r\n      addForm: {\r\n        username: \"\",\r\n        gender: \"\",\r\n        phone: \"\",\r\n        position: \"\",\r\n        birthday: \"\"\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getWorkerList();\r\n  },\r\n  methods: {\r\n    add() {\r\n\r\n      this.addWorkerVisible = true;\r\n    },\r\n    captureFace(row) {\r\n      this.dialogVisible = true;\r\n      this.instructionsText = '信息采集中...';\r\n      // 在4秒后改变文本\r\n      setTimeout(() => {\r\n        this.instructionsText = '请正对摄像头';\r\n      }, 4000);\r\n\r\n      // 请求访问用户的摄像头\r\n      navigator.mediaDevices.getUserMedia({ video: true })\r\n          .then(stream => {\r\n            const videoElement = document.getElementById('videoElement');\r\n            videoElement.srcObject = stream;\r\n\r\n            const chunks = [];\r\n            const recorder = new MediaRecorder(stream);\r\n\r\n            recorder.ondataavailable = event => {\r\n              chunks.push(event.data);\r\n            };\r\n\r\n            recorder.start(5000);\r\n\r\n            setTimeout(() => {\r\n              recorder.stop();\r\n              stream.getVideoTracks()[0].stop();\r\n            }, 5000);\r\n\r\n            recorder.onstop = () => {\r\n\r\n              const formData = new FormData();\r\n              formData.append('file', new Blob(chunks, { type: 'video/mp4' }), 'video.mp4');\r\n\r\n              formData.append('username', row.username);\r\n              formData.append('id', row.id);\r\n              formData.append('label', 1);\r\n              this.instructionsText = '上传人脸信息...';\r\n\r\n              axios.post('http://fan.v1.idcfengye.com/upload_video', formData)\r\n                  .then(response => {\r\n\r\n                    console.log('Video upload successful:', response.data);\r\n                  })\r\n                  .catch(error => {\r\n                    alert(\"上传失败，未检测到有效人脸\");\r\n                    console.error('Error uploading video:', error);\r\n\r\n                  })\r\n                  .finally(() => {\r\n                    this.dialogVisible = false;\r\n                    this.getWorkerList();\r\n                  });\r\n            };\r\n          })\r\n          .catch(error => {\r\n            console.error('Error accessing camera:', error);\r\n\r\n            this.dialogVisible = false;\r\n          });\r\n    },\r\n\r\n\r\n    handleClose(done) {\r\n      done();\r\n    },\r\n\r\n    getWorkerList() {\r\n      axios.get(\"http://xiao.free.idcfengye.com/api/employee/all\")\r\n          .then(res => {\r\n            this.workerList = res.data.data;\r\n            this.listForm.total = res.data.data.length;\r\n          }).catch(error => {\r\n        console.log(error);\r\n      });\r\n    },\r\n    queryWorker(item) {\r\n      this.workerMesTitle = '查看信息';\r\n\r\n      axios.get(`http://xiao.free.idcfengye.com/api/employee/search`, { params: { id: item.id } })\r\n          .then(res => {\r\n            this.form = res.data.data[0];\r\n            this.workerMesVisible = true;\r\n          }).catch(error => {\r\n        console.log(error);\r\n      });\r\n    },\r\n    confirmDelete(item) {\r\n      MessageBox.confirm('确定要删除该员工信息吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n          .then(() => {\r\n            this.delWorker(item);\r\n          })\r\n          .catch(() => {\r\n\r\n          });\r\n    },\r\n    delWorker(item) {\r\n      const id = parseInt(item.id, 10); // 确保 id 是整数格式\r\n\r\n      axios.delete('http://xiao.free.idcfengye.com/api/employee/delete', {\r\n        data: { id: id }\r\n      })\r\n          .then(res => {\r\n            this.$message.success('删除成功');\r\n            this.getWorkerList();\r\n          })\r\n          .catch(error => {\r\n            console.error(error);\r\n            this.$message.error('删除失败');\r\n          });\r\n    },\r\n\r\n    formatDate(date) {\r\n      const d = new Date(date);\r\n      const month = `${d.getMonth() + 1}`.padStart(2, '0');\r\n      const day = `${d.getDate()}`.padStart(2, '0');\r\n      const year = d.getFullYear();\r\n      return [year, month, day].join('-');\r\n    },\r\n    updateWorker(item) {\r\n      this.workerMesTitle = '修改信息';\r\n\r\n      axios.get(`http://xiao.free.idcfengye.com/api/employee/search`, { params: { id: item.id } })\r\n          .then(res => {\r\n            this.form = res.data.data[0];\r\n            this.workerMesVisible1 = true;\r\n          }).catch(error => {\r\n        console.log(error);\r\n      });\r\n    },\r\n    submitUpdateForm(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.updateWorkerInfo();\r\n        } else {\r\n          console.log('表单验证失败!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    updateWorkerInfo() {\r\n      const requestBody = {\r\n        id: this.form.id,\r\n        gender: this.form.gender,\r\n        phone: this.form.phone,\r\n        hire_date: this.formatDate(this.form.hire_date),\r\n        description: this.form.description,\r\n      };\r\n\r\n      axios.put('http://xiao.free.idcfengye.com/api/employee/update', requestBody, {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n          .then(res => {\r\n            if (res.data.code === 0) {\r\n              this.$message.success('信息修改成功');\r\n              this.getWorkerList();\r\n            } else {\r\n              this.$message.error('信息修改失败：' + res.data.message);\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error(error);\r\n            this.$message.error('信息修改失败');\r\n          });\r\n\r\n      this.workerMesVisible1 = false;\r\n    },\r\n    adda() {\r\n      this.addWorkerTitle = '新增工作人员信息';\r\n      this.addWorkerVisible = true;\r\n      this.addForm = {\r\n        username: \"\",\r\n        gender: \"\",\r\n        phone: \"\",\r\n        position: \"\",\r\n        birthday: \"\"\r\n      };\r\n    },\r\n    addWorker() {\r\n      const requestBody = {\r\n        username: this.addForm.username,\r\n        gender: this.addForm.gender,\r\n\r\n        position: this.addForm.position,\r\n        phone: this.addForm.phone,\r\n        id_card: '123456112345623456',\r\n        avatarPath: \"hanerbao-2023-JULY-8-16-42-23.jpg\"\r\n      };\r\n      axios.post(\"http://xiao.free.idcfengye.com/api/employee/add\", requestBody)\r\n          .then(res => {\r\n            this.getWorkerList();\r\n          }).catch(error => {\r\n        console.log(error);\r\n      });\r\n      this.addWorkerVisible = false;\r\n    },\r\n    handleSizeChange(value) {\r\n      this.listForm.size = value;\r\n      this.listForm.page = 1;  // 重置当前页为第一页\r\n      this.getWorkerList();\r\n    },\r\n    handlePageChange(value) {\r\n      this.listForm.page = value;\r\n      this.getWorkerList();\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ni#icon {\r\n  font-size: xx-large;\r\n  float: right;\r\n  margin-top: 10px;\r\n  margin-right: 5px;\r\n}\r\n\r\n.face-recognition-container {\r\n  position: relative;\r\n  background: black;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.overlay {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.add-button {\r\n  margin-left: 70vw;\r\n  font-weight: bold;\r\n  background-color: #f3aecd;\r\n  border-color: #f3aecd;\r\n}\r\n\r\n.instructions {\r\n  color: white;\r\n  font-size: 24px;\r\n  margin-top: 5px;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}