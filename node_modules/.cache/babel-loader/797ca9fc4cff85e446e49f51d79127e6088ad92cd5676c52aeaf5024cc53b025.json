{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Login.vue\",\n  data() {\n    return {\n      active: {\n        login: true,\n        register: false\n      },\n      showPassword: false,\n      // Add this line\n      errorMessage: '',\n      successMessage: '',\n      loginForm: {\n        mail_or_id: '',\n        password: ''\n      },\n      registerForm: {\n        user_name: '',\n        mail_or_id: '',\n        password: '',\n        verify_code: '',\n        user_tele: '',\n        user_real_name: ''\n      }\n    };\n  },\n  methods: {\n    //密码是否可视\n    togglePasswordVisibility() {\n      this.showPassword = !this.showPassword;\n    },\n    //登录注册之间的跳转\n    go(type) {\n      this.active = {\n        login: type === 'login',\n        register: type === 'register'\n      };\n    },\n    //警告提示\n    alert() {\n      this.$message({\n        message: this.errorMessage,\n        type: 'warning'\n      });\n    },\n    //成功提示\n    node() {\n      this.$message({\n        message: this.successMessage,\n        type: 'success'\n      });\n    },\n    submit() {\n      if (this.active.login) {\n        request.post('/user/loginWithPassword', this.loginForm).then(res => {\n          console.log(res.data);\n          if (res.code === 500) {\n            this.errorMessage = '该账号密码错误';\n            this.alert();\n          } else if (res.code === 200) {\n            //保存token\n            Cookies.set('token', JSON.stringify(res.data));\n            //跳转到主页\n            this.$router.push('/home');\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      } else if (this.active.register) {\n        request.post('/user/register', this.registerForm).then(res => {\n          console.log(res.data);\n          if (res.code === 200) {\n            this.successMessage = '成功注册';\n            this.node();\n            this.go('login');\n          } else if (this.registerForm.user_name.length < 5) {\n            this.errorMessage = '用户名不得小于5位';\n            this.alert();\n          } else if (this.registerForm.password.length < 6) {\n            this.errorMessage = '密码不得小于6位';\n            this.alert();\n          } else if (res.code === 500) {\n            this.errorMessage = res.data.msg;\n            this.alert();\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    },\n    send() {\n      console.log(this.registerForm.mail_or_id);\n      const data = JSON.stringify({\n        email: this.registerForm.mail_or_id\n      });\n      request.post('/user/sendVerifyCode', data).then(res => {\n        console.log(res.data);\n        if (res.data.code === 500) {\n          this.errorMessage = '请输入正确的邮箱';\n          this.alert();\n        } else if (res.data.code === 200) {\n          this.successMessage = \"验证码成功发送\";\n          this.node();\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["request","name","data","active","login","register","showPassword","errorMessage","successMessage","loginForm","mail_or_id","password","registerForm","user_name","verify_code","user_tele","user_real_name","methods","togglePasswordVisibility","go","type","alert","$message","message","node","submit","post","then","res","console","log","code","Cookies","set","JSON","stringify","$router","push","catch","err","length","msg","send","email"],"sources":["src/views/login/Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"content_login\">\r\n    <div id=\"app\" class=\"container\">\r\n      <img src=\"@/assets/bg1.jpg\" alt=\"\">\r\n      <div class=\"panel\">\r\n        <div class=\"switch\">\r\n          <span :class='{\"active\": active.login}' @click=\"go('login')\">登录</span>\r\n          <span>/</span>\r\n          <span :class='{\"active\": active.register}' @click=\"go('register')\">注册</span>\r\n        </div>\r\n        <div class=\"form\" id=\"fromLogin\">\r\n          <!-- 如果按钮选择的是注册就展示这个里面的内容 -->\r\n          <el-form ref=\"registerForm\" v-if=\"active.register\">\r\n            <el-form-item prop=\"username\" class=\"input\">\r\n              <el-input placeholder=\"请输入用户名\" size=\"medium\" style=\"margin: 10px 0\" prefix-icon=\"el-icon-user\" v-model=\"registerForm.user_name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\" class=\"input\">\r\n              <el-input placeholder=\"请输入密码\" size=\"medium\" style=\"margin: 10px 0\" prefix-icon=\"el-icon-aim\" show-password v-model=\"registerForm.password\"></el-input>\r\n            </el-form-item>\r\n            <el-form style=\"display: flex; height: 2rem;\">\r\n              <el-form-item prop=\"username\">\r\n                <el-input placeholder=\"请输入邮箱\" size=\"medium\" style=\"margin: 10px 0\" prefix-icon=\"el-icon-aim\" v-model=\"registerForm.mail_or_id\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button  class=\"send_button\" style=\"height:100%;border-radius: 1rem; margin: 10px 0;\" @click=\"send\">发送验证码</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n            <el-form-item prop=\"password\" class=\"input\">\r\n              <el-input placeholder=\"请输入验证码\" size=\"medium\" style=\"margin: 10px 0\" prefix-icon=\"el-icon-aim\" show-password v-model=\"registerForm.verify_code\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"username\" class=\"input\">\r\n              <el-input placeholder=\"请输入真实姓名\" size=\"medium\" style=\"margin: 10px 0\" prefix-icon=\"el-icon-user\" v-model=\"registerForm.user_real_name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"username\" class=\"input\">\r\n              <el-input placeholder=\"请输入手机号码\" size=\"medium\" style=\"margin: 10px 0\" prefix-icon=\"el-icon-phone\" v-model=\"registerForm.user_tele\"></el-input>\r\n            </el-form-item>\r\n<!--            性别-->\r\n<!--            <el-form-item prop=\"username\" class=\"input\">-->\r\n<!--              <div>性别：</div>-->\r\n<!--              <el-radio v-model=\"registerForm.user_sex\" label=\"1\">男</el-radio>-->\r\n<!--              <el-radio v-model=\"registerForm.user_sex\" label=\"2\">女</el-radio>-->\r\n<!--            </el-form-item>-->\r\n            <el-form-item>\r\n              <el-button  @click=\"submit\">注册</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n          <!-- 如果按钮选择的是登录就展示这个里面的内容 -->\r\n          <el-form ref=\"loginForm\" v-if=\"active.login\">\r\n            <el-form-item prop=\"username\" class=\"input\">\r\n              <el-input placeholder=\"请输入账号/邮箱\" size=\"15px\" style=\"margin: 15px 0\" prefix-icon=\"el-icon-user\" v-model=\"loginForm.mail_or_id\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\" class=\"input\">\r\n              <el-input placeholder=\"请输入密码\" size=\"medium\" style=\"margin: 10px 0\" prefix-icon=\"el-icon-aim\" show-password v-model=\"loginForm.password\"></el-input>\r\n              <!-- Add this button below the password input field -->\r\n              <span class=\"toggle-password\" @click=\"togglePasswordVisibility\">\r\n                <i :class=\"showPassword ? 'el-icon-eye' : 'el-icon-eye-off'\"></i>\r\n              </span>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button @click=\"submit\">登录</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n  name: \"Login.vue\",\r\n  data() {\r\n    return {\r\n      active: {\r\n        login: true,\r\n        register: false\r\n      },\r\n      showPassword: false, // Add this line\r\n      errorMessage:'',\r\n      successMessage:'',\r\n      loginForm :{\r\n        mail_or_id : '',\r\n        password : ''\r\n      },\r\n      registerForm:{\r\n        user_name : '',\r\n        mail_or_id : '',\r\n        password : '',\r\n        verify_code : '',\r\n        user_tele:'',\r\n        user_real_name:''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    //密码是否可视\r\n    togglePasswordVisibility() {\r\n      this.showPassword = !this.showPassword;\r\n    },\r\n    //登录注册之间的跳转\r\n    go(type) {\r\n      this.active = {\r\n        login: type === 'login',\r\n        register: type === 'register'\r\n      };\r\n    },\r\n    //警告提示\r\n    alert(){\r\n      this.$message({\r\n        message:this.errorMessage,\r\n        type: 'warning'\r\n      });\r\n    },\r\n    //成功提示\r\n    node(){\r\n      this.$message({\r\n        message:this.successMessage,\r\n        type: 'success'\r\n      });\r\n    },\r\n    submit() {\r\n      if (this.active.login) {\r\n        request.post('/user/loginWithPassword',this.loginForm).then(res => {\r\n          console.log(res.data);\r\n          if(res.code===500){\r\n            this.errorMessage='该账号密码错误'\r\n            this.alert();\r\n          }else if(res.code===200){\r\n            //保存token\r\n            Cookies.set('token',JSON.stringify(res.data))\r\n            //跳转到主页\r\n            this.$router.push('/home');\r\n          }\r\n        }).catch((err)=>{\r\n          console.log(err);\r\n        })\r\n      } else if (this.active.register) {\r\n        request.post('/user/register',this.registerForm).then(res => {\r\n          console.log(res.data);\r\n          if(res.code===200){\r\n            this.successMessage='成功注册';\r\n            this.node();\r\n            this.go('login');\r\n          }else if(this.registerForm.user_name.length<5){\r\n            this.errorMessage='用户名不得小于5位'\r\n            this.alert();\r\n          }else if(this.registerForm.password.length<6){\r\n            this.errorMessage='密码不得小于6位';\r\n            this.alert();\r\n          }else if(res.code===500){\r\n            this.errorMessage=res.data.msg;\r\n            this.alert();\r\n          }\r\n        }).catch((err)=>{\r\n          console.log(err);\r\n        })\r\n      }\r\n    },\r\n    send(){\r\n      console.log(this.registerForm.mail_or_id);\r\n      const data = JSON.stringify({email: this.registerForm.mail_or_id });\r\n      request.post('/user/sendVerifyCode',data).then(res => {\r\n        console.log(res.data);\r\n        if(res.data.code===500){\r\n          this.errorMessage='请输入正确的邮箱'\r\n          this.alert();\r\n        }else if(res.data.code===200){\r\n          this.successMessage=\"验证码成功发送\"\r\n          this.node();\r\n        }\r\n      }).catch((err)=>{\r\n        console.log(err);\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n*{\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.content_login{\r\n  /* 100%的窗口高度 */\r\n  height: 100vh;\r\n  /* 弹性布局 水平 + 垂直居中 */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  /* 渐变背景 */\r\n  background: linear-gradient(45deg, rgb(243, 206, 174), rgb(248, 226, 197)) fixed;\r\n}\r\n\r\n.container{\r\n  /* 相对定位 */\r\n  position: relative;\r\n  width: 70rem;\r\n}\r\n\r\n.container img{\r\n  width: 70rem;\r\n}\r\n\r\n.panel{\r\n  width: 44%;\r\n  margin: 2rem -2rem 0;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.switch span{\r\n  color: #ccc;\r\n  font-size: 1.4rem;\r\n  /* 鼠标放上变小手 */\r\n  cursor: pointer;\r\n}\r\n\r\n.switch span.active{\r\n  color: rgb(248, 226, 197);\r\n}\r\n\r\n.form{\r\n  width: 15rem;\r\n  margin: 3rem -10rem 0;\r\n}\r\n\r\n.form .input{\r\n  position: relative;\r\n  opacity: 1;\r\n  height: 2rem;\r\n  width: 100%;\r\n  margin: 2rem 0;\r\n  transition: 0.4s;\r\n}\r\n\r\n.form input{\r\n  outline: none;\r\n  width: 100%;\r\n  border: none;\r\n  border-bottom: .1rem solid rgb(248, 226, 197);\r\n  position: relative;\r\n  line-height: 35px;\r\n  background-color: transparent;\r\n  z-index: 1;\r\n}\r\n\r\n.form span{\r\n  display: block;\r\n  color: rgb(3, 39, 76);\r\n  font-size: 0.8rem;\r\n  cursor: pointer;\r\n}\r\n\r\n\r\n.form button{\r\n  border: none;\r\n  outline: none;\r\n  margin: 2.5rem 0 0;\r\n  width: 100%;\r\n  height: 3rem;\r\n  border-radius: 3rem;\r\n  background:linear-gradient(45deg, rgb(243, 206, 174), rgb(248, 226, 197)) ;\r\n  box-shadow: 0 0 8px rgb(243, 206, 174);\r\n  cursor: pointer;\r\n  color: white;\r\n}\r\n\r\n.toggle-password {\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 10px;\r\n  transform: translateY(-50%);\r\n  cursor: pointer;\r\n}\r\n\r\n\r\n</style>\r\n"],"mappings":";AAsEA,OAAAA,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;QACAC,KAAA;QACAC,QAAA;MACA;MACAC,YAAA;MAAA;MACAC,YAAA;MACAC,cAAA;MACAC,SAAA;QACAC,UAAA;QACAC,QAAA;MACA;MACAC,YAAA;QACAC,SAAA;QACAH,UAAA;QACAC,QAAA;QACAG,WAAA;QACAC,SAAA;QACAC,cAAA;MACA;IACA;EACA;EACAC,OAAA;IACA;IACAC,yBAAA;MACA,KAAAZ,YAAA,SAAAA,YAAA;IACA;IACA;IACAa,GAAAC,IAAA;MACA,KAAAjB,MAAA;QACAC,KAAA,EAAAgB,IAAA;QACAf,QAAA,EAAAe,IAAA;MACA;IACA;IACA;IACAC,MAAA;MACA,KAAAC,QAAA;QACAC,OAAA,OAAAhB,YAAA;QACAa,IAAA;MACA;IACA;IACA;IACAI,KAAA;MACA,KAAAF,QAAA;QACAC,OAAA,OAAAf,cAAA;QACAY,IAAA;MACA;IACA;IACAK,OAAA;MACA,SAAAtB,MAAA,CAAAC,KAAA;QACAJ,OAAA,CAAA0B,IAAA,iCAAAjB,SAAA,EAAAkB,IAAA,CAAAC,GAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA,CAAA1B,IAAA;UACA,IAAA0B,GAAA,CAAAG,IAAA;YACA,KAAAxB,YAAA;YACA,KAAAc,KAAA;UACA,WAAAO,GAAA,CAAAG,IAAA;YACA;YACAC,OAAA,CAAAC,GAAA,UAAAC,IAAA,CAAAC,SAAA,CAAAP,GAAA,CAAA1B,IAAA;YACA;YACA,KAAAkC,OAAA,CAAAC,IAAA;UACA;QACA,GAAAC,KAAA,CAAAC,GAAA;UACAV,OAAA,CAAAC,GAAA,CAAAS,GAAA;QACA;MACA,gBAAApC,MAAA,CAAAE,QAAA;QACAL,OAAA,CAAA0B,IAAA,wBAAAd,YAAA,EAAAe,IAAA,CAAAC,GAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA,CAAA1B,IAAA;UACA,IAAA0B,GAAA,CAAAG,IAAA;YACA,KAAAvB,cAAA;YACA,KAAAgB,IAAA;YACA,KAAAL,EAAA;UACA,gBAAAP,YAAA,CAAAC,SAAA,CAAA2B,MAAA;YACA,KAAAjC,YAAA;YACA,KAAAc,KAAA;UACA,gBAAAT,YAAA,CAAAD,QAAA,CAAA6B,MAAA;YACA,KAAAjC,YAAA;YACA,KAAAc,KAAA;UACA,WAAAO,GAAA,CAAAG,IAAA;YACA,KAAAxB,YAAA,GAAAqB,GAAA,CAAA1B,IAAA,CAAAuC,GAAA;YACA,KAAApB,KAAA;UACA;QACA,GAAAiB,KAAA,CAAAC,GAAA;UACAV,OAAA,CAAAC,GAAA,CAAAS,GAAA;QACA;MACA;IACA;IACAG,KAAA;MACAb,OAAA,CAAAC,GAAA,MAAAlB,YAAA,CAAAF,UAAA;MACA,MAAAR,IAAA,GAAAgC,IAAA,CAAAC,SAAA;QAAAQ,KAAA,OAAA/B,YAAA,CAAAF;MAAA;MACAV,OAAA,CAAA0B,IAAA,yBAAAxB,IAAA,EAAAyB,IAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA,CAAA1B,IAAA;QACA,IAAA0B,GAAA,CAAA1B,IAAA,CAAA6B,IAAA;UACA,KAAAxB,YAAA;UACA,KAAAc,KAAA;QACA,WAAAO,GAAA,CAAA1B,IAAA,CAAA6B,IAAA;UACA,KAAAvB,cAAA;UACA,KAAAgB,IAAA;QACA;MACA,GAAAc,KAAA,CAAAC,GAAA;QACAV,OAAA,CAAAC,GAAA,CAAAS,GAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}