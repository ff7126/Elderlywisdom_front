{"ast":null,"code":"import * as echarts from 'echarts';\nimport { workerList } from \"@/api/worker\";\nrequire('echarts/theme/macarons'); //引入主题\n\nexport default {\n  data() {\n    return {\n      workerList: [],\n      gender: \"\",\n      chartPie: null,\n      total: 0,\n      totalW: 0,\n      totalM: 0,\n      supportW: 0,\n      supportM: 0,\n      maintenanceW: 0,\n      maintenanceM: 0,\n      other: 0\n    };\n  },\n  mounted() {\n    this.getWorkerList();\n  },\n  methods: {\n    getWorkerList() {\n      workerList().then(res => {\n        this.workerList = res.data.records;\n        this.calculateWorkerCounts();\n        this.drawPieChart();\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    calculateWorkerCounts() {\n      this.total = this.workerList.length;\n      this.totalM = this.workerList.filter(worker => worker.gender === '0').length;\n      this.totalW = this.workerList.filter(worker => worker.gender === '1').length;\n      this.supportM = this.workerList.filter(worker => worker.position === '护工' && worker.gender === '0').length;\n      this.supportW = this.workerList.filter(worker => worker.position === '护工' && worker.gender === '1').length;\n      this.maintenanceM = this.workerList.filter(worker => worker.position === '维修工' && worker.gender === '0').length;\n      this.maintenanceW = this.workerList.filter(worker => worker.position === '维修工' && worker.gender === '1').length;\n      this.other = this.total - this.supportM - this.supportW - this.maintenanceM - this.maintenanceW;\n    },\n    drawPieChart() {\n      let mytextStyle = {\n        color: \"#333\",\n        fontSize: 18\n      };\n      let mylabel = {\n        show: true,\n        position: \"right\",\n        offset: [30, 40],\n        formatter: '{b} : {c} ({d}%)',\n        textStyle: mytextStyle\n      };\n      this.chartPie = echarts.init(document.getElementById('chartPie'), 'macarons');\n      this.chartPie.setOption({\n        title: {\n          text: '职位分析图',\n          subtext: '',\n          x: 'center'\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n        },\n        legend: {\n          data: ['其他', '男性护工', '男性维修工', '女性护工', '女性维修工'],\n          left: \"center\",\n          top: \"bottom\",\n          orient: \"horizontal\"\n        },\n        series: [{\n          name: '数据统计',\n          type: 'pie',\n          radius: ['50%', '70%'],\n          center: ['50%', '50%'],\n          data: [{\n            value: this.other,\n            name: '其他'\n          }, {\n            value: this.supportM,\n            name: '男性护工'\n          }, {\n            value: this.maintenanceM,\n            name: '男性维修工'\n          }, {\n            value: this.supportW,\n            name: '女性护工'\n          }, {\n            value: this.maintenanceW,\n            name: '女性维修工'\n          }],\n          animationEasing: 'cubicInOut',\n          //图像显示的速度\n          animationDuration: 1600,\n          label: {\n            emphasis: mylabel\n          }\n        }]\n      });\n    }\n  }\n};","map":{"version":3,"names":["echarts","workerList","require","data","gender","chartPie","total","totalW","totalM","supportW","supportM","maintenanceW","maintenanceM","other","mounted","getWorkerList","methods","then","res","records","calculateWorkerCounts","drawPieChart","catch","error","console","log","length","filter","worker","position","mytextStyle","color","fontSize","mylabel","show","offset","formatter","textStyle","init","document","getElementById","setOption","title","text","subtext","x","tooltip","trigger","legend","left","top","orient","series","name","type","radius","center","value","animationEasing","animationDuration","label","emphasis"],"sources":["src/views/page/work/workerImage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2 style=\"margin-left:10px; height:10px\"></h2>\r\n    <h2 style=\"margin-left:10px\">详细信息</h2>\r\n    <div class = example style=\"width:210px;height:170px;margin-left:20px;margin-top:15px;\">\r\n      <img src=\"./worker.png\" width=\"50\" height=\"50\" style=\"float:left;padding-top: 8px;padding-left: 5px;\" v-image-preview/>\r\n      <p style=\" font-weight: bold;font-size:20px;font-style: italic;padding-top: 22px;\">工作人员总数</p>\r\n      <p><div style=\" font-weight: bold;font-size:30px;font-style: italic;padding-top: 22px;padding-left: 80px;\" >{{total}}人</div>\r\n    </div>\r\n    <div class = example style=\"width:210px;height:170px;position: absolute;left: 540px;top: 120px;\">\r\n      <img src=\"./workerm.png\" width=\"50\" height=\"50\" style=\"float:left;padding-top: 15px;padding-left:20px;\" v-image-preview/>\r\n      <p style=\" font-weight: bold;font-size:20px;font-style: italic;padding-top: 22px;padding-left: 12px;\" >男性人数</p>\r\n      <p><div style=\" font-weight: bold;font-size:20px;font-style: italic;padding-left: 90px;\" >{{totalM}}人</div>\r\n\r\n      <img src=\"./workerwm.png\" width=\"50\" height=\"50\" style=\"float:left;padding-top: 20px;padding-left: 20px;\" v-image-preview/>\r\n      <p style=\" font-weight: bold;font-size:20px;font-style: italic;padding-top: 22px;padding-left: 12px;\">女性人数</p>\r\n      <p><div style=\" font-weight: bold;font-size:20px;font-style: italic;padding-left: 90px;\">{{totalW}}人</div>\r\n    </div>\r\n    <div class = example style=\"width:210px;height:170px;position: absolute;left: 810px;top: 120px;\">\r\n      <img src=\"./workerm.png\" width=\"50\" height=\"50\" style=\"float:left;padding-top: 15px;padding-left:20px;\" v-image-preview/>\r\n      <p style=\" font-weight: bold;font-size:20px;font-style: italic;padding-top: 22px;padding-left: 12px;\">护工人数</p>\r\n      <p><div style=\" font-weight: bold;font-size:20px;font-style: italic;padding-left: 90px;\">{{supportM}}人</div>\r\n\r\n      <img src=\"./workerwm.png\" width=\"50\" height=\"50\" style=\"float:left;padding-top: 20px;padding-left: 20px;\" v-image-preview/>\r\n      <p style=\" font-weight: bold;font-size:20px;font-style: italic;padding-top: 22px;padding-left: 12px;\">护工人数</p>\r\n      <p><div style=\" font-weight: bold;font-size:20px;font-style: italic;padding-left: 90px;\">{{supportW}}人</div>\r\n    </div>\r\n    <div class = example style=\"width:210px;height:170px;position: absolute;left: 1080px;top: 120px;\">\r\n      <img src=\"./workerm.png\" width=\"50\" height=\"50\" style=\"float:left;padding-top: 15px;padding-left:20px;\" v-image-preview/>\r\n      <p style=\" font-weight: bold;font-size:20px;font-style: italic;padding-top: 22px;padding-left: 12px;\">维修工人数</p>\r\n      <p><div style=\" font-weight: bold;font-size:20px;font-style: italic;padding-left: 90px;\">{{maintenanceM}}人</div>\r\n\r\n      <img src=\"./workerwm.png\" width=\"50\" height=\"50\" style=\"float:left;padding-top: 20px;padding-left: 20px;\" v-image-preview/>\r\n      <p style=\" font-weight: bold;font-size:20px;font-style: italic;padding-top: 22px;padding-left: 12px;\">维修工人数</p>\r\n      <p><div style=\" font-weight: bold;font-size:20px;font-style: italic;padding-left: 90px;\">{{maintenanceW}}人</div>\r\n    </div>\r\n    <div>\r\n      <h2 style=\"margin-left:10px;margin-top:15px\">工作人员职位分析图</h2><br>\r\n      <div id=\"chartPie\" class=\"pie-wrap\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\nimport {workerList} from \"@/api/worker\";\r\nrequire('echarts/theme/macarons');//引入主题\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      workerList:[],\r\n      gender: \"\",\r\n      chartPie: null,\r\n      total:0,\r\n      totalW:0,\r\n      totalM:0,\r\n      supportW:0,\r\n      supportM:0,\r\n      maintenanceW:0,\r\n      maintenanceM:0,\r\n      other:0,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getWorkerList()\r\n  },\r\n  methods: {\r\n    getWorkerList(){\r\n      workerList().then(res => {\r\n        this.workerList = res.data.records;\r\n        this.calculateWorkerCounts();\r\n        this.drawPieChart();\r\n      }).catch(error => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    calculateWorkerCounts() {\r\n      this.total = this.workerList.length;\r\n      this.totalM = this.workerList.filter((worker) => worker.gender === '0').length;\r\n      this.totalW = this.workerList.filter((worker) => worker.gender === '1').length;\r\n      this.supportM = this.workerList.filter((worker) => worker.position === '护工' && worker.gender === '0').length;\r\n      this.supportW = this.workerList.filter((worker) => worker.position === '护工' && worker.gender === '1').length;\r\n      this.maintenanceM = this.workerList.filter((worker) => worker.position === '维修工' && worker.gender === '0').length;\r\n      this.maintenanceW = this.workerList.filter((worker) => worker.position === '维修工' && worker.gender === '1').length;\r\n      this.other = this.total - this.supportM - this.supportW - this.maintenanceM - this.maintenanceW;\r\n    },\r\n    drawPieChart() {\r\n      let mytextStyle = {\r\n        color: \"#333\",\r\n        fontSize: 18,\r\n      };\r\n      let mylabel = {\r\n        show: true,\r\n        position: \"right\",\r\n        offset: [30, 40],\r\n        formatter: '{b} : {c} ({d}%)',\r\n        textStyle: mytextStyle\r\n      };\r\n      this.chartPie = echarts.init(document.getElementById('chartPie'),'macarons');\r\n      this.chartPie.setOption({\r\n        title: {\r\n          text: '职位分析图',\r\n          subtext: '',\r\n          x: 'center'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: \"{a} <br/>{b} : {c} ({d}%)\",\r\n        },\r\n        legend: {\r\n          data: ['其他','男性护工', '男性维修工', '女性护工', '女性维修工' ],\r\n          left:\"center\",\r\n          top:\"bottom\",\r\n          orient:\"horizontal\",\r\n        },\r\n        series: [\r\n          {\r\n            name: '数据统计',\r\n            type: 'pie',\r\n            radius: ['50%', '70%'],\r\n            center: ['50%', '50%'],\r\n            data: [\r\n              {value: this.other, name: '其他'},\r\n              {value: this.supportM, name: '男性护工'},\r\n              {value: this.maintenanceM, name: '男性维修工'},\r\n              {value: this.supportW, name: '女性护工'},\r\n              {value: this.maintenanceW, name: '女性维修工'}\r\n            ],\r\n            animationEasing: 'cubicInOut',\r\n            //图像显示的速度\r\n            animationDuration: 1600,\r\n            label: {\r\n              emphasis: mylabel\r\n            }\r\n          }\r\n        ]\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.example{\r\n  background: rgba(255, 255, 255, 1);\r\n  -webkit-backdrop-filter: blur(8px);\r\n  backdrop-filter: blur(8px);\r\n  border-radius: 25px;\r\n  box-shadow:inset 0 0 6px rgba(255, 255, 255, 0.2);\r\n}\r\n.pie-wrap{\r\n  width:100%;\r\n  height:400px;\r\n}\r\n\r\n</style>"],"mappings":"AA4CA,YAAAA,OAAA;AACA,SAAAC,UAAA;AACAC,OAAA;;AAEA;EACAC,KAAA;IACA;MACAF,UAAA;MACAG,MAAA;MACAC,QAAA;MACAC,KAAA;MACAC,MAAA;MACAC,MAAA;MACAC,QAAA;MACAC,QAAA;MACAC,YAAA;MACAC,YAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACAD,cAAA;MACAd,UAAA,GAAAgB,IAAA,CAAAC,GAAA;QACA,KAAAjB,UAAA,GAAAiB,GAAA,CAAAf,IAAA,CAAAgB,OAAA;QACA,KAAAC,qBAAA;QACA,KAAAC,YAAA;MACA,GAAAC,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;IACA;IACAH,sBAAA;MACA,KAAAd,KAAA,QAAAL,UAAA,CAAAyB,MAAA;MACA,KAAAlB,MAAA,QAAAP,UAAA,CAAA0B,MAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAxB,MAAA,UAAAsB,MAAA;MACA,KAAAnB,MAAA,QAAAN,UAAA,CAAA0B,MAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAxB,MAAA,UAAAsB,MAAA;MACA,KAAAhB,QAAA,QAAAT,UAAA,CAAA0B,MAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,QAAA,aAAAD,MAAA,CAAAxB,MAAA,UAAAsB,MAAA;MACA,KAAAjB,QAAA,QAAAR,UAAA,CAAA0B,MAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,QAAA,aAAAD,MAAA,CAAAxB,MAAA,UAAAsB,MAAA;MACA,KAAAd,YAAA,QAAAX,UAAA,CAAA0B,MAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,QAAA,cAAAD,MAAA,CAAAxB,MAAA,UAAAsB,MAAA;MACA,KAAAf,YAAA,QAAAV,UAAA,CAAA0B,MAAA,CAAAC,MAAA,IAAAA,MAAA,CAAAC,QAAA,cAAAD,MAAA,CAAAxB,MAAA,UAAAsB,MAAA;MACA,KAAAb,KAAA,QAAAP,KAAA,QAAAI,QAAA,QAAAD,QAAA,QAAAG,YAAA,QAAAD,YAAA;IACA;IACAU,aAAA;MACA,IAAAS,WAAA;QACAC,KAAA;QACAC,QAAA;MACA;MACA,IAAAC,OAAA;QACAC,IAAA;QACAL,QAAA;QACAM,MAAA;QACAC,SAAA;QACAC,SAAA,EAAAP;MACA;MACA,KAAAzB,QAAA,GAAAL,OAAA,CAAAsC,IAAA,CAAAC,QAAA,CAAAC,cAAA;MACA,KAAAnC,QAAA,CAAAoC,SAAA;QACAC,KAAA;UACAC,IAAA;UACAC,OAAA;UACAC,CAAA;QACA;QACAC,OAAA;UACAC,OAAA;UACAX,SAAA;QACA;QACAY,MAAA;UACA7C,IAAA;UACA8C,IAAA;UACAC,GAAA;UACAC,MAAA;QACA;QACAC,MAAA,GACA;UACAC,IAAA;UACAC,IAAA;UACAC,MAAA;UACAC,MAAA;UACArD,IAAA,GACA;YAAAsD,KAAA,OAAA5C,KAAA;YAAAwC,IAAA;UAAA,GACA;YAAAI,KAAA,OAAA/C,QAAA;YAAA2C,IAAA;UAAA,GACA;YAAAI,KAAA,OAAA7C,YAAA;YAAAyC,IAAA;UAAA,GACA;YAAAI,KAAA,OAAAhD,QAAA;YAAA4C,IAAA;UAAA,GACA;YAAAI,KAAA,OAAA9C,YAAA;YAAA0C,IAAA;UAAA,EACA;UACAK,eAAA;UACA;UACAC,iBAAA;UACAC,KAAA;YACAC,QAAA,EAAA5B;UACA;QACA;MAEA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}