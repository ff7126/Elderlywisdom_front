{"ast":null,"code":"import { addSchedule, getScheduleAll } from \"@/api/schedule\";\nexport default {\n  name: \"PatrolSchedule\",\n  components: {},\n  mounted() {\n    this.getData();\n    this.$nextTick(() => {\n      // 点击前一个月\n      let prevBtn = document.querySelector(\".el-calendar__button-group .el-button-group>button:nth-child(1)\");\n      prevBtn.addEventListener(\"click\", () => {\n        this.judgeDate();\n      });\n      let dayBtn = document.querySelector(\".el-calendar__button-group .el-button-group>button:nth-child(2)\");\n      dayBtn.addEventListener(\"click\", () => {\n        this.judgeDate();\n      });\n      let nextBtn = document.querySelector(\".el-calendar__button-group .el-button-group>button:nth-child(3)\");\n      nextBtn.addEventListener(\"click\", () => {\n        this.judgeDate();\n      });\n    });\n  },\n  data() {\n    // var schedule = JSON.parse(localStorage.getItem('calendar')||'[]')\n    return {\n      dialogFormVisible: false,\n      formLabelWidth: '120px',\n      value: new Date(),\n      selectMonth: '07',\n      // scheduleData: [],\n      scheduleData: [\n        // {\n        //     date: \"02\",\n        //     name: \"张三老人特别关注\",\n        //     type:1\n        // },\n        // {\n        //     date: \"03\",\n        //     name:  \"护工去往李四老人家\",\n        //     type:2\n        // },\n        // {\n        //     date: \"04\",\n        //     name:  \"维修工去往王五家修设备\",\n        //     type:3\n        // },\n        // {\n        //     date: \"05\",\n        //     name:  \"探望爱心活动去往刘六\",\n        //     type:4\n        // },\n        // {\n        //     date: \"06\",\n        //     name:  \"李四老人特别关注\",\n        //     type:1\n        // },\n        // {\n        //     date: \"07\",\n        //     name:  \"张三老人特别关注\",\n        //     type:1\n        // },\n      ],\n      form: {\n        date: '',\n        type: '',\n        title: ''\n      }\n    };\n  },\n  created() {\n    this.getData();\n  },\n  methods: {\n    getData() {\n      getScheduleAll(this.selectMonth).then(res => {\n        this.$message.success(\"获取成功\");\n        this.scheduleData = res.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    judgeDate() {\n      let d = new Date(this.value);\n      if (this.year != d.getFullYear()) {\n        this.year = d.getFullYear();\n        this.selectMonth = d.getMonth();\n      }\n      this.getData();\n    },\n    click() {\n      console.log(this.scheduleData);\n    },\n    handleClick(row) {\n      console.log(row);\n    },\n    add() {\n      addSchedule(this.form).then(res => {\n        this.$message.success(\"添加成功\");\n      }).catch(error => {\n        console.log(error);\n      });\n      //添加成功后，执行这一步\n      this.dialogFormVisible = false;\n    },\n    delete_c() {\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["addSchedule","getScheduleAll","name","components","mounted","getData","$nextTick","prevBtn","document","querySelector","addEventListener","judgeDate","dayBtn","nextBtn","data","dialogFormVisible","formLabelWidth","value","Date","selectMonth","scheduleData","form","date","type","title","created","methods","then","res","$message","success","catch","error","console","log","d","year","getFullYear","getMonth","click","handleClick","row","add","delete_c","$confirm","confirmButtonText","cancelButtonText","message"],"sources":["src/views/page/schedule/calendar.vue"],"sourcesContent":["<template>\r\n  <div class=\"all\">\r\n    <div style=\" margin-top:5px;margin-bottom:15px\">\r\n      <H2 style=\"float:left;padding-top: 10px;color: #676060; margin-left: 10px\">日程表</H2>\r\n      <!--    第一行的图标和增加日程的按钮    -->\r\n      <div style=\"margin-top:10px;margin-left:1080px;display: inline\">\r\n        <!--    以下四个为日程的位置    -->\r\n        <div style=\"float:left;margin-left:520px\">\r\n          <div class=\"green-cycle\" style=\"float: left;\"></div>\r\n          <div style=\" font-size:15px;letter-spacing:1px;float:right;margin-left: 10px;color: #676060\">\r\n            老人\r\n          </div>\r\n        </div>\r\n        <div style=\"float:left;margin-left:50px\">\r\n          <div class=\"orange-cycle\" style=\"float: left;\"></div>\r\n          <div style=\" font-size:15px;letter-spacing:1px;float: right;margin-left: 10px;color: #676060\">\r\n            护工\r\n          </div>\r\n        </div>\r\n        <div style=\"float:left;margin-left:50px\">\r\n          <div class=\"blue-cycle\" style=\"float: left;\"></div>\r\n          <div style=\" font-size:15px;letter-spacing:1px;float: right;margin-left: 10px;color: #676060\">\r\n            维修人员\r\n          </div>\r\n        </div>\r\n        <div style=\"float:left;margin-left:50px\">\r\n          <div class=\"pink-cycle\" style=\"float: left;\"></div>\r\n          <div style=\" font-size:15px;letter-spacing:1px;float: right;margin-left: 10px;color: #676060\">\r\n            探望\r\n          </div>\r\n        </div>\r\n        <!--        -->\r\n        <div class=\"part2\">\r\n          <div class=\"button\" style=\"margin-left:1100px;\">\r\n            <el-button  style =\"float:right; margin-right: 20px;margin-top: -10px;border-color:#f88901;background-color: #F3CEAE;\" type=\"primary\" icon=\"el-icon-edit\"  @click=\"dialogFormVisible = true\">增加日程</el-button>\r\n            <el-dialog title=\"增加日程\" :visible.sync=\"dialogFormVisible\" width='600px' style=\"padding-bottom: 0px;padding-top: 10px;\">\r\n              <el-form :model=\"form\">\r\n\r\n                <el-form-item label=\"请选择日程日期\" prop=\"date\">\r\n                  <el-col span='11'>\r\n                    <el-date-picker type=\"date\" placeholder=\"选择日期\" format=\"yyyy-MM-dd\"  value-format=\"yyyy-MM-dd\" v-model=\"form.date\" style=\"width: 100%;\"></el-date-picker>\r\n                  </el-col>\r\n                </el-form-item>\r\n                <el-form-item label=\"请输入完成人选\" prop=\"type\">\r\n                  <el-col span='11'>\r\n                    <el-select v-model=\"form.type\" placeholder=\"请选择人选\">\r\n                      <el-option label=\"老人\" value=\"1\"></el-option>\r\n                      <el-option label=\"护工\" value=\"2\"></el-option>\r\n                      <el-option label=\"维修人员\" value=\"3\"></el-option>\r\n                      <el-option label=\"探望\" value=\"4\"></el-option>\r\n                    </el-select>\r\n                  </el-col>\r\n                </el-form-item>\r\n                <el-form-item label=\"请输入日程内容\" >\r\n                  <el-col span='17'>\r\n                    <el-input v-model=\"form.title\" autocomplete=\"off\"></el-input>\r\n                  </el-col>\r\n                </el-form-item>\r\n\r\n              </el-form>\r\n              <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"add()\" style=\"border-color:#f88901;background-color: #F3CEAE\">确 定</el-button>\r\n              </div>\r\n            </el-dialog>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"height: 10px\"></div>\r\n    <!--   calendar主体部分     -->\r\n    <div class=\"calendar\">\r\n      <div>\r\n        <el-calendar :ShowNextPrevMonth = \"false\">\r\n          <template slot=\"dateCell\" slot-scope=\"{data}\" >\r\n            <div style=\"font-size:20px\">\r\n              {{ data.day.split('-')[2]}}\r\n            </div>\r\n            <div style=\"width:100%;\" v-for=\"item in scheduleData\" :key=\"item\">\r\n              <div style=\"margin: 0 10px;width:120px\" v-if=\"item.type=='1' &&data.day.split('-')[1]==7&&(item.day).indexOf(data.day.split('-').slice(2).join('-'))!=-1\">\r\n\r\n                <div class=\"green-cycle\" style=\"float: left;\"></div>\r\n                <div style=\" font-size:13px;letter-spacing:2px\">\r\n                  {{item.title}}\r\n<!--                  <el-button icon=\"el-icon-delete-solid\" type=\"text\" class=\"delete-button\"></el-button>-->\r\n                </div>\r\n                <div class=\"delete-button-container\" v-if=\"item.type=='1' && data.day.split('-')[1]==7 && (item.day).indexOf(data.day.split('-').slice(2).join('-'))!=-1\">\r\n                  <el-button icon=\"el-icon-delete-solid\" type=\"text\" class=\"delete-button\"  @click=\"delete_c()\"></el-button>\r\n                </div>\r\n              </div>\r\n              <div style=\"margin: 0 10px;width:120px\" v-if=\"item.type=='2' &&data.day.split('-')[1]==7&&(item.day).indexOf(data.day.split('-').slice(2).join('-'))!=-1\">\r\n\r\n                <div class=\"orange-cycle\" style=\"float: left;\"></div>\r\n                <div style=\" font-size:13px;letter-spacing:2px\">\r\n                  {{item.title}}\r\n                </div>\r\n                <div class=\"delete-button-container\" v-if=\"item.type=='2' && data.day.split('-')[1]==7 && (item.day).indexOf(data.day.split('-').slice(2).join('-'))!=-1\">\r\n                  <el-button icon=\"el-icon-delete-solid\" type=\"text\" class=\"delete-button\"  @click=\"delete_c()\"></el-button>\r\n                </div>\r\n              </div>\r\n              <div style=\"margin: 0 10px;width:120px\" v-if=\"item.type=='3' &&data.day.split('-')[1]==7&&(item.day).indexOf(data.day.split('-').slice(2).join('-'))!=-1\">\r\n\r\n                <div class=\"blue-cycle\" style=\"float: left;\"></div>\r\n                <div style=\"font-size:13px;letter-spacing:2px\">\r\n                  {{item.title}}\r\n                </div>\r\n                <div class=\"delete-button-container\" v-if=\"item.type=='3' && data.day.split('-')[1]==7 && (item.day).indexOf(data.day.split('-').slice(2).join('-'))!=-1\">\r\n                  <el-button icon=\"el-icon-delete-solid\" type=\"text\" class=\"delete-button\"  @click=\"delete_c()\"></el-button>\r\n                </div>\r\n              </div>\r\n              <div style=\"margin: 0 10px;width:120px\" v-if=\"item.type=='4' &&data.day.split('-')[1]==7&&(item.day).indexOf(data.day.split('-').slice(2).join('-'))!=-1\">\r\n\r\n                <div class=\"pink-cycle\" style=\"float: left;\"></div>\r\n                <div style=\"font-size:13px;letter-spacing:2px\">\r\n                  {{item.title}}\r\n                </div>\r\n                <div class=\"delete-button-container\" v-if=\"item.type=='4' && data.day.split('-')[1]==7 && (item.day).indexOf(data.day.split('-').slice(2).join('-'))!=-1\">\r\n                  <el-button icon=\"el-icon-delete-solid\" type=\"text\" class=\"delete-button\"  @click=\"delete_c()\"></el-button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </el-calendar>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {addSchedule, getScheduleAll} from \"@/api/schedule\";\r\n\r\nexport default {\r\n\r\n  name: \"PatrolSchedule\",\r\n  components: {},\r\n  mounted() {\r\n    this.getData();\r\n    this.$nextTick(() => {\r\n      // 点击前一个月\r\n      let prevBtn = document.querySelector(\r\n          \".el-calendar__button-group .el-button-group>button:nth-child(1)\"\r\n      );\r\n      prevBtn.addEventListener(\"click\", () => {\r\n        this.judgeDate();\r\n      });\r\n      let dayBtn = document.querySelector(\r\n          \".el-calendar__button-group .el-button-group>button:nth-child(2)\"\r\n      );\r\n      dayBtn.addEventListener(\"click\", () => {\r\n        this.judgeDate();\r\n      });\r\n      let nextBtn = document.querySelector(\r\n          \".el-calendar__button-group .el-button-group>button:nth-child(3)\"\r\n      );\r\n      nextBtn.addEventListener(\"click\", () => {\r\n        this.judgeDate();\r\n      });\r\n    });\r\n  },\r\n  data() {\r\n    // var schedule = JSON.parse(localStorage.getItem('calendar')||'[]')\r\n    return {\r\n      dialogFormVisible: false,\r\n      formLabelWidth: '120px',\r\n      value: new Date(),\r\n      selectMonth:'07',\r\n      // scheduleData: [],\r\n      scheduleData:[\r\n          // {\r\n          //     date: \"02\",\r\n          //     name: \"张三老人特别关注\",\r\n          //     type:1\r\n          // },\r\n          // {\r\n          //     date: \"03\",\r\n          //     name:  \"护工去往李四老人家\",\r\n          //     type:2\r\n          // },\r\n          // {\r\n          //     date: \"04\",\r\n          //     name:  \"维修工去往王五家修设备\",\r\n          //     type:3\r\n          // },\r\n          // {\r\n          //     date: \"05\",\r\n          //     name:  \"探望爱心活动去往刘六\",\r\n          //     type:4\r\n          // },\r\n          // {\r\n          //     date: \"06\",\r\n          //     name:  \"李四老人特别关注\",\r\n          //     type:1\r\n          // },\r\n          // {\r\n          //     date: \"07\",\r\n          //     name:  \"张三老人特别关注\",\r\n          //     type:1\r\n          // },\r\n      ],\r\n      form: {\r\n        date:'',\r\n        type:'',\r\n        title:'',\r\n      },\r\n\r\n    };\r\n\r\n  },\r\n  created(){\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    getData(){\r\n      getScheduleAll(this.selectMonth).then(res => {\r\n        this.$message.success(\"获取成功\")\r\n        this.scheduleData=res.data\r\n      }).catch(error => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    judgeDate(){\r\n      let d = new Date(this.value);\r\n      if (this.year != d.getFullYear()) {\r\n        this.year = d.getFullYear();\r\n        this.selectMonth = d.getMonth();\r\n\r\n      }\r\n      this.getData()\r\n    },\r\n    click(){\r\n      console.log(this.scheduleData)\r\n    },\r\n    handleClick(row) {\r\n      console.log(row);\r\n    },\r\n    add(){\r\n      addSchedule(this.form).then(res => {\r\n        this.$message.success(\"添加成功\")\r\n\r\n      }).catch(error => {\r\n        console.log(error)\r\n      })\r\n      //添加成功后，执行这一步\r\n      this.dialogFormVisible=false\r\n    },\r\n    delete_c(){\r\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        });\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.el-calendar-day {\r\n  box-sizing: border-box;\r\n  padding: 5px;\r\n  height: 80px;\r\n}\r\ni#icon{\r\n  font-size:xx-large;\r\n  float:right;\r\n  margin-top: 10px;\r\n  margin-right:5px;\r\n}\r\n\r\n</style>\r\n<style>\r\n.el-dialog__body {\r\n  padding: 10px 30px 0px 30px;\r\n  color: #606266;\r\n  font-size: 14px;\r\n  word-break: break-all;\r\n}\r\n.el-calendar-table .el-calendar-day{\r\n  height: 130px;\r\n}\r\n.green-cycle{\r\n  margin-top:7px;\r\n  margin-right:5px;\r\n  width: 7px;\r\n  height: 7px;\r\n  display: inline-block;\r\n  background-color: #73d13d;\r\n  border-radius: 50%;\r\n}\r\n.orange-cycle{\r\n  margin-top:7px;\r\n  margin-right:5px;\r\n  width: 7px;\r\n  height: 7px;\r\n  display: inline-block;\r\n  background-color: #ff8f00;\r\n  border-radius: 50%;\r\n}\r\n.blue-cycle{\r\n  margin-top:7px;\r\n  margin-right:5px;\r\n  width: 7px;\r\n  height: 7px;\r\n  display: inline-block;\r\n  background-color: #03a9f4;\r\n  border-radius: 50%;\r\n}\r\n.pink-cycle{\r\n  margin-top:7px;\r\n  margin-right:5px;\r\n  width: 7px;\r\n  height: 7px;\r\n  display: inline-block;\r\n  background-color: #ff85c0;\r\n  border-radius: 50%;\r\n}\r\n\r\n.delete-button {\r\n  padding: 0; /* 可选：根据需要设置按钮的内边距 */\r\n  background-color: transparent; /* 可选：设置按钮的背景颜色为透明 */\r\n  border: none; /* 可选：去除按钮的边框 */\r\n  color: #e7af86;\r\n  font-size: 15px; /* 根据需要设置图标的大小 */\r\n  float:right;\r\n}\r\n\r\n.delete-button-container {\r\n  position: relative;\r\n  bottom: 0;\r\n  right: 0;\r\n  padding: 10px;\r\n}\r\n</style>\r\n\r\n\r\n\r\n"],"mappings":"AAuIA,SAAAA,WAAA,EAAAC,cAAA;AAEA;EAEAC,IAAA;EACAC,UAAA;EACAC,QAAA;IACA,KAAAC,OAAA;IACA,KAAAC,SAAA;MACA;MACA,IAAAC,OAAA,GAAAC,QAAA,CAAAC,aAAA,CACA,iEACA;MACAF,OAAA,CAAAG,gBAAA;QACA,KAAAC,SAAA;MACA;MACA,IAAAC,MAAA,GAAAJ,QAAA,CAAAC,aAAA,CACA,iEACA;MACAG,MAAA,CAAAF,gBAAA;QACA,KAAAC,SAAA;MACA;MACA,IAAAE,OAAA,GAAAL,QAAA,CAAAC,aAAA,CACA,iEACA;MACAI,OAAA,CAAAH,gBAAA;QACA,KAAAC,SAAA;MACA;IACA;EACA;EACAG,KAAA;IACA;IACA;MACAC,iBAAA;MACAC,cAAA;MACAC,KAAA,MAAAC,IAAA;MACAC,WAAA;MACA;MACAC,YAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MAAA,CACA;MACAC,IAAA;QACAC,IAAA;QACAC,IAAA;QACAC,KAAA;MACA;IAEA;EAEA;EACAC,QAAA;IACA,KAAApB,OAAA;EACA;EACAqB,OAAA;IACArB,QAAA;MACAJ,cAAA,MAAAkB,WAAA,EAAAQ,IAAA,CAAAC,GAAA;QACA,KAAAC,QAAA,CAAAC,OAAA;QACA,KAAAV,YAAA,GAAAQ,GAAA,CAAAd,IAAA;MACA,GAAAiB,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;IACA;IACArB,UAAA;MACA,IAAAwB,CAAA,OAAAjB,IAAA,MAAAD,KAAA;MACA,SAAAmB,IAAA,IAAAD,CAAA,CAAAE,WAAA;QACA,KAAAD,IAAA,GAAAD,CAAA,CAAAE,WAAA;QACA,KAAAlB,WAAA,GAAAgB,CAAA,CAAAG,QAAA;MAEA;MACA,KAAAjC,OAAA;IACA;IACAkC,MAAA;MACAN,OAAA,CAAAC,GAAA,MAAAd,YAAA;IACA;IACAoB,YAAAC,GAAA;MACAR,OAAA,CAAAC,GAAA,CAAAO,GAAA;IACA;IACAC,IAAA;MACA1C,WAAA,MAAAqB,IAAA,EAAAM,IAAA,CAAAC,GAAA;QACA,KAAAC,QAAA,CAAAC,OAAA;MAEA,GAAAC,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;MACA;MACA,KAAAjB,iBAAA;IACA;IACA4B,SAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAvB,IAAA;MACA,GAAAI,IAAA;QACA,KAAAE,QAAA;UACAN,IAAA;UACAwB,OAAA;QACA;MACA,GAAAhB,KAAA;QACA,KAAAF,QAAA;UACAN,IAAA;UACAwB,OAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}